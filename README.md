# CAS (Telegram Casino Bot)

–ë–æ—Ç-–∫–∞–∑–∏–Ω–æ –Ω–∞ **Node.js (CommonJS)** + **grammy** + **Prisma/PostgreSQL**.

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –∫–æ–¥)
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞ –≤—Å–µ–≥–¥–∞ ‚ÇΩ (RUB).** –ë–∞–ª–∞–Ω—Å—ã/—Å—Ç–∞–≤–∫–∏/–≤—ã–≤–æ–¥—ã ‚Äî –≤ —Ä—É–±–ª—è—Ö.
- **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ USDT.** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å—É–º–º—É –≤ ‚ÇΩ ‚Üí –∏–Ω–≤–æ–π—Å CryptoBot —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ USDT ‚Üí –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ –≤ ‚ÇΩ.
- **–î–µ–ø–æ–∑–∏—Ç –∑–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ —Ñ–∞–∫—Ç—É –æ–ø–ª–∞—Ç—ã** (–ø–æ —Å—Ç–∞—Ç—É—Å—É `paid` —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).
- **Ledger —Ö—Ä–∞–Ω–∏—Ç –¥–µ–ª—å—Ç—ã**:
  - `BET` ‚Äî –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
  - `DEPOSIT` ‚Äî –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ
  - `WITHDRAW` –ø–∏—à–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ `COMPLETE` (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ) –∏ `REFUND` (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ)
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–æ–Ω—É—Å –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞ –ø—Ä–æ–∏–≥—Ä—ã—à–∏** –≤–æ –≤—Å–µ—Ö –∏–≥—Ä–∞—Ö.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- PostgreSQL 14+

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
npm i
cp .env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env`:
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `BOT_USERNAME` ‚Äî (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) username –±–æ—Ç–∞ (–¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–π —Ä–µ—Ñ. —Å—Å—ã–ª–∫–∏)
- `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Postgres
- `CRYPTOBOT_API_TOKEN` ‚Äî API token CryptoBot
- `ADMIN_IDS` ‚Äî Telegram user id –∞–¥–º–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

### –ü–æ–¥–Ω—è—Ç—å PostgreSQL —á–µ—Ä–µ–∑ Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ —É–¥–æ–±–Ω–µ–µ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose.yml`:
```bash
docker compose up -d
```

### Prisma / –º–∏–≥—Ä–∞—Ü–∏–∏ / —Å–∏–¥—ã
```bash
npx prisma generate
npx prisma migrate dev
npx prisma db seed
```

## –ó–∞–ø—É—Å–∫
```bash
npm run dev
```

## –¢–µ—Å—Ç—ã
```bash
npm test
```

## –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- –ö–∞–Ω–∞–ª—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
  - *–°—Å—ã–ª–∫–∏* (‚úîÔ∏è –Ω–æ–≤–æ—Å—Ç–Ω–æ–π / üéÆ –∏–≥—Ä / üí∞ –≤—ã–ø–ª–∞—Ç) ‚Äî –¥–ª—è —ç–∫—Ä–∞–Ω–∞ ¬´–ü–æ–¥–¥–µ—Ä–∂–∫–∞¬ª.
  - numeric `channel_id` ‚Äî —á—Ç–æ–±—ã –±–æ—Ç –º–æ–≥ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç–∞—Ö.
- –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤: –∑–∞—è–≤–∫–∞ ‚Üí –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–º ‚Üí **—Ä—É—á–Ω–∞—è –≤—ã–ø–ª–∞—Ç–∞ –≤–Ω–µ –±–æ—Ç–∞**.
- –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **polling** –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (–¥–µ–ø–æ–∑–∏—Ç—ã –∏ —Ä–∞—Å—Å—ã–ª–∫–∏) ‚Äî —ç—Ç–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env`. –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω—ã –ø–æ–ø–∞–ª–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é ‚Äî **—Ä–æ—Ç–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** (Telegram BotFather + CryptoBot).
